<%= form_for(@user, as: 'user', role: 'form', remote: true
    ) do |f| %>
    <% if @user.errors.any? %>
        <div id="error_explanation">
          <h6><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h6>

          <ul>
            <% @user.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>
    <input type="hidden" name="random_id" value="<%= params[:random_id] %>"/>

    <div class="form-group">
      <label for="name">User Name</label>
      <%= f.text_field :user_name, class: 'form-control give-me-focus', title: "Enter user name used to sign in", tabindex: increment_tab_index, autofocus: true %>
      <p>The user's login user name</p>
    </div>

    <div class="form-group">
      <label for="given_name">Given Name</label>
      <%= f.text_field :given_name, class: 'form-control', title: "User given name", tabindex: increment_tab_index %>
    </div>

    <div class="form-group">
      <label for="family_name">Family Name</label>
      <%= f.text_field :family_name, class: 'form-control', title: "User family name", tabindex: increment_tab_index %>
    </div>

    <hr>

    <div class="form-group align-right">
      <% if @user.new_record? %>
          <%= link_to 'Cancel', '/cancel-new-form', class: "btn btn-primary cancel-new-record-link", title: "Cancel new user", tabindex: increment_tab_index, data: {element_id: "new-user-#{params[:random_id]}"} %>
      <% end %>
      <%= f.submit "Save", id: 'user-save', class: 'btn btn-primary width-5em', title: "Save changes", tabindex: increment_tab_index, disabled: false %>
    </div>

<% end %>
<div id="search-result-details-info-message-container" class="message-container"></div>
<div id="search-result-details-error-message-container" class="message-container"></div>

<% if @take_focus %>
  <script>
    $(document).ready(function () {
      focusOnField('user_name');
    })
  </script>
<% end %>
