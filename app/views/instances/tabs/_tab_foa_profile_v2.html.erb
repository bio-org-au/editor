<%= render partial: "profile_items/product_item_config_dropdown", locals: {
    product_configs_and_profile_items: product_configs_and_profile_items,
    selected_product_item_config_id: selected_product_item_config_id,
    instance: instance
  }
%>
<% if selected_product_item_config_id.blank? %>
  <div id="product-config-and-profile-items-container"></div>
<% else %>
  <div id="product-config-and-profile-items-container">
    <% all_items, _product = Profile::ProfileItem::DefinedQuery::ProductAndProductItemConfigs.new(@instance, {product_item_config_id: selected_product_item_config_id}).run_query %>
    <% all_items.each do |config_items| %>
        <% product_item_config, profile_item = config_items.values_at(:product_item_config, :profile_item) %>
        <div class="product-item-config-container product-item-config-container-id-<%= product_item_config.id %>">
        <%= render partial: "instances/tabs/tab_product_config_profile_item_form", 
          locals: {product_item_config:  product_item_config, profile_item: profile_item, instance: @instance}
        %>
    <% end %>
  </div>
<% end %>
