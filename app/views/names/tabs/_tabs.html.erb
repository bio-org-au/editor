<ul class="nav nav-tabs">

  <% if Rails.configuration.try('multi_product_tabs_enabled') %>
  <% @current_registered_user.available_products_from_roles.each do |product| %>
  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                              last: false,
                                              this_tab: 'tab_details',
                                              link_text: "#{product.name} Details",
                                              link_id: "name-details-#{product.name.downcase}-tab",
                                              link_title: "See details of the name for #{product.name}",
                                              tab_index: increment_tab_index,
                                              prev_tab: '',
                                              next_tab: '',
                                              product_name: product.name } %>

  <% if can? 'names', 'update' %>
  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                                last: false,
                                                this_tab: 'tab_edit',
                                                link_text: "#{product.name} Edit".html_safe,
                                                link_id: "name-edit-#{product.name.downcase}-tab",
                                                link_title: "Edit details of the name for #{product.name}.",
                                                tab_index: increment_tab_index,
                                                prev_tab: '',
                                                next_tab: '',
                                                product_name: product.name} %>
  <% end %>

  <% if can? :create_with_product_reference, Instance %>
  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                                last: false,
                                                this_tab: 'tab_instances_profile_v2',
                                                link_text: "#{product.name} New instance".html_safe,
                                                link_id: "name-instances-profile-v2-#{product.name.downcase}-tab",
                                                link_title: "Create an instance for the name in #{product.name}.",
                                                tab_index: increment_tab_index,
                                                prev_tab: '',
                                                next_tab: '',
                                                product_name: product.name} %>
  <% elsif can? :create, Instance %>
  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                                last: false,
                                                this_tab: 'tab_instances',
                                                link_text: "#{product.name} New instance".html_safe,
                                                link_id: "name-instances-#{product.name.downcase}-tab",
                                                link_title: "Create an instance for the name in #{product.name}.",
                                                tab_index: increment_tab_index,
                                                prev_tab: '',
                                                next_tab: '',
                                                product_name: product.name} %>
  <% end %>
  <% end %>
  <% else %>
  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                            last: false,
                                            this_tab: 'tab_details',
                                            link_text: 'Details',
                                            link_id: 'name-details-tab',
                                            link_title: 'See details of the name',
                                            tab_index: increment_tab_index,
                                            prev_tab: '',
                                            next_tab: '' } %>

  <% if can? 'names', 'update' %>

  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                              last: false,
                                              this_tab: 'tab_edit',
                                              link_text: "Edit".html_safe,
                                              link_id: 'name-edit-tab',
                                              link_title: 'Edit details of the name.',
                                              tab_index: increment_tab_index,
                                              prev_tab: '',
                                              next_tab: ''} %>
  <% end %>

  <% if can? :create_with_product_reference, Instance %>
  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                              last: false,
                                              this_tab: 'tab_instances_profile_v2',
                                              link_text: "New instance".html_safe,
                                              link_id: 'name-instances-profile-v2-tab',
                                              link_title: 'Create an instance for the name.',
                                              tab_index: increment_tab_index,
                                              prev_tab: '',
                                              next_tab: ''} %>
  <% elsif can? :create, Instance %>
  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                              last: false,
                                              this_tab: 'tab_instances',
                                              link_text: "New instance".html_safe,
                                              link_id: 'name-instances-tab',
                                              link_title: 'Create an instance for the name.',
                                              tab_index: increment_tab_index,
                                              prev_tab: '',
                                              next_tab: ''} %>
  <% end %>
  <% end %>

  <% if ENV['ENABLE_MULTI_PRODUCT_TABS'] == 'true' %>
  <% @current_registered_user.available_products_from_roles.each do |product| %>
  <% if can? :create, Instance %>
  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                                last: false,
                                                this_tab: 'tab_copy',
                                                link_text: "#{product.name} Copy".html_safe,
                                                link_id: "name-copy-#{product.name.downcase}-tab",
                                                link_title: "Copy the name for #{product.name}.",
                                                tab_index: increment_tab_index,
                                                prev_tab: '',
                                                next_tab: '',
                                                product_name: product.name} %>
  <% end %>

  <% if can? 'names', 'delete' %>
  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                                last: false,
                                                this_tab: 'tab_delete',
                                                link_text: "#{product.name} Delete".html_safe,
                                                link_id: "name-delete-#{product.name.downcase}-tab",
                                                link_title: "Delete name for #{product.name}.",
                                                tab_index: increment_tab_index,
                                                prev_tab: '',
                                                next_tab: '',
                                                product_name: product.name} %>
  <% end %>
  <% end %>

  <% if can? 'names', 'update' %>
  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                              last: false,
                                              this_tab: 'tab_more',
                                              link_text: "More".html_safe,
                                              link_id: 'name-more-tab',
                                              link_title: 'Show more tabs',
                                              tab_index: increment_tab_index,
                                              prev_tab: '',
                                              next_tab: ''} %>
  <% end %>
  <% else %>
  <% if can? :create, Instance %>
  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                              last: false,
                                              this_tab: 'tab_copy',
                                              link_text: "Copy".html_safe,
                                              link_id: 'name-copy-tab',
                                              link_title: 'Copy the name.',
                                              tab_index: increment_tab_index,
                                              prev_tab: '',
                                              next_tab: ''} %>
  <% end %>

  <% if can? 'names', 'delete' %>

  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                              last: false,
                                              this_tab: 'tab_delete',
                                              link_text: "Delete".html_safe,
                                              link_id: 'name-delete-tab',
                                              link_title: 'Delete name.',
                                              tab_index: increment_tab_index,
                                              prev_tab: '',
                                              next_tab: ''} %>

  <% end %>

  <% if can? 'names', 'update' %>

  <%= render partial: 'names/tabs/tab', locals: {first: false,
                                              last: false,
                                              this_tab: 'tab_more',
                                              link_text: "More".html_safe,
                                              link_id: 'name-more-tab',
                                              link_title: 'Show more tabs',
                                              tab_index: increment_tab_index,
                                              prev_tab: '',
                                              next_tab: ''} %>

  <% end %>
  <% end %>

</ul>
